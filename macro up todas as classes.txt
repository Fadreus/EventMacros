#campo dos aprendizes by HenryBK

automacro moveToSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNotNear /Sprakki/
	QuestInactive 7117
	call {
		do move 52 113
	}
}

automacro TalkSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNear /Sprakki/
	QuestInactive 7117
	call {
	    [
		do conf autoMoveOnDeath 1
		do conf autoMoveOnDeath_x none
		do conf autoMoveOnDeath_y none
		do conf autoMoveOnDeath_map none
		do conf saveMap none
		do conf saveMap_warpToBuyOrSell 0
		do conf sellAuto 0
		do conf storageAuto 0
		do conf storageAuto_npc none
		do conf getAuto_0 none
		do conf autoTalkCont 0
		do conf sitAuto_idle 0
		do conf sitAuto_hp_lower 40
		do conf sitAuto_hp_upper 80
		do conf itemsTakeAuto 0
		do conf itemsGatherAuto 0
		do conf lockMap none
		do conf attackAuto_inLockOnly 0
		do conf route_randomWalk 0
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9
		do conf itemsMaxWeight 49
		do conf itemsMaxWeight_sellOrStore 48
		do conf itemsMaxNum_sellOrStore 99
		do iconf 12323 0 0 0
		do iconf 12324 0 0 0
		do iconf 569 0 0 0
		do iconf 7059 50 0 0
		do iconf 7060 50 0 0
		do iconf 13040 0 0 0
		do iconf 1243 0 0 0
		do iconf 2112 0 0 0
		do iconf 5055 0 0 0
		do iconf 2414 0 0 0
		do iconf 2510 0 0 0
		do iconf 2352 0 0 0
		do iconf 1201 0 0 0
		do iconf 13041 0 0 0
		do iconf 2393 0 0 0
		do iconf 2301 0 0 0
		]
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
	}
}

automacro moveInside {
	exclusive 1
	QuestActive 7117
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

macro GotoInside {
	$nextMap = nextMap("$.map")
	do move $nextMap 101 29
}

automacro moveNextToSprakki {
	exclusive 1
	QuestActive 7117
	NpcNotNear /Sprakki/
	BaseLevel = 1
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

macro GotoSpraki {
	do move 101 29
}

automacro talkSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

automacro talkSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

macro SprakiiBuggedTalk {
	do talk $.NpcNearLastBinId
	do talk cont
	do talk cont
	do talk resp 0
	do talk cont
	do talk cont
}

automacro talkSprakki {
	exclusive 1
	QuestActive 7117
	BaseLevel = 1
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk resp 0
		do talk cont
		do talk cont
	}
}

automacro moveNextToBrade1 {
	exclusive 1
	QuestActive 7118
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade
}

automacro moveNextToBrade2 {
	exclusive 1
	QuestActive 7119
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade
}

macro MoveToBrade {
	do move 103 105
}

automacro talkBrade {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
	}
}


automacro moveNextToBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call MoveToBrade
}

automacro talkBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
	}
}

automacro equipStuffForBrade {
	exclusive 1
	QuestActive 7119
	IsNotEquippedID topHead 5055, leftHand 2112, robe 2510, shoes 2414, armor 2352, rightHand 1243
	call {
		$check = GetIndexAndEquipped("topHead", 5055)
		if ($check != -1) {
			do eq $check
		}
		$check = GetIndexAndEquipped("robe", 2510)
		if ($check != -1) {
			do eq $check
		}
		$check = GetIndexAndEquipped("shoes",2414)
		if ($check != -1) {
			do eq $check
		}
		$check = GetIndexAndEquipped("armor",2352)
		if ($check != -1) {
			do eq $check
		}
		$check = GetIndexAndEquipped("leftHand",2112)
		if ($check != -1) {
			do eq $check
		}
		$check = GetIndexAndEquipped("rightHand",1243)
		if ($check != -1) {
			do eq $check
		}
	}
}

automacro talkBradeSecond {
	exclusive 1
	QuestActive 7119
	BaseLevel = 3
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
	}
}

automacro BradeBuggedNo7120MoveJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 0
	NpcNotNear /Jinha/
	call MoveJinha
}

automacro moveToGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNotNear /Jinha/
	SkillLevel NV_FIRSTAID = 0
	priority 0
	call MoveJinha
}

macro MoveJinha {
	do move 107 108
}

automacro BradeBuggedNo7120TalkJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 0
	NpcNear /Jinha/
	call TalkJinha
}

automacro talkGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNear /Jinha/
	SkillLevel NV_FIRSTAID = 0
	priority 0
	call TalkJinha
}

macro TalkJinha {
	do talk $.NpcNearLastBinId
	do talk cont
	do talk resp 0
	do talk cont
	do talk cont
	do talk cont
}

automacro BradeBuggedNo7120MoveBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	InInventoryID 2393 = 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 1
	NpcNotNear /Brade/
	call MoveToBrade
}

automacro BradeBuggedNo7120TalkBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	InInventoryID 2393 = 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 1
	NpcNear /Brade/
	call TalkBradeGetTunic
}

automacro talkBradeThird {
	exclusive 1
	QuestActive 7120
	SkillLevel NV_FIRSTAID = 1
	NpcNear /Brade/
	priority 0
	call TalkBradeGetTunic
}

macro TalkBradeGetTunic {
	do talk $.NpcNearLastBinId
	do talk cont
	do talk cont
	do talk cont
}

automacro equipStuffForGirl {
	exclusive 1
	QuestInactive 7120
	InInventoryID 2393 = 1
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	IsNotEquippedID armor 2393
	call {
		$check = GetIndexAndEquipped("armor", 2393)
		if ($check != -1) {
			do eq $check
		}
	}
}

automacro moveNextToChoco {
	exclusive 1
	IsEquippedID armor 2393
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNotNear /Choco/
	priority 1
	call {
		do move 32 171
	}
}

automacro talkChoco {
	exclusive 1
	QuestInactive 7120
	QuestInactive 7121
	IsEquippedID armor 2393
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		add_key('current_npc', 'kafra')
	}
}

automacro moveNextToGuys {
	exclusive 1
	QuestActive 7121
	NpcNotNear /(Choco|Kafra|Zonda|Soldado)/
	priority 0
	call {
		do move 32 171
	}
}

automacro talkKafra {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc kafra
	NpcNear /Kafra/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk resp 4
		do conf current_npc zonda
	}
}

automacro talkZonda {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc zonda
	NpcNear /Zonda/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do conf current_npc soldado
	}
}

automacro talkSoldado {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc soldado
	NpcNear /Soldado/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do conf current_npc choco
	}
}

automacro talkChocoAgain {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc choco
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do conf current_npc kafra

	}
}

automacro moveBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

automacro talkBradeonGroundsGetQuest {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do conf route_randomWalk 1
		do conf itemsTakeAuto 2
		$potName = GetNamenyNameID(569)
		do conf useSelf_item_0 $potName
		do conf useSelf_item_0_disabled 0
		do conf useSelf_item_0_hp < 60%
		do conf getAuto_0 $potName
		do conf getAuto_0_minAmount 20
		do conf getAuto_0_maxAmount 200
		do conf getAuto_0_passive 0
		do mconf Lunático 0 0 0
		do mconf Poring 1 0 0
		do mconf Drops 0 0 0
		do conf attackAuto 2
	}
}

automacro moveBradeCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

macro moveBradeGrounds {
	do mconf Lunático 0 0 0
	do mconf Poring 0 0 0
	do mconf Drops 0 0 0
	do conf attackAuto 0
	do move 99 31
}

automacro talkBradeonGroundsCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		add_key("quest_atual" , "lunaticos")
	}
}

automacro equipStuffForBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 1
	IsNotEquippedID rightHand 13040
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		$check = GetIndexAndEquipped("rightHand", 13040)
		if ($check != -1) {
			do eq $check
		}
	}
}

automacro LastBradeBug {
	NpcMsg /Você ainda está fazendo o curso do instrutor Brade/
	exclusive 1
	priority 0
	call {
		call moveBradeGrounds
		do talk &npc(/Brade/)
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		do talk cont
		add_key("quest_atual" , "lunaticos")
	}
}


# Quest de lunaticos , pickys e salgueiros by Nipodemos
# Inspirada na macro de 1 a 99 do CALF
automacro começar quest lunaticos {
ConfigKey quest_atual lunaticos
exclusive 1
QuestInactive 7124
InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
run-once 1
call {
	log ======== Indo pegar quest para lunaticos
	do move &rand(103,105) &rand(36,38)
	pause 2
	do talk &npc(/Mago/)
	do talk cont
	do talk resp 2
	do talk cont
}
}

automacro caçando lunaticos {
QuestActive 7124
InMap new_1-3, new_2-3, new_3-3
run-once 1
call {
	[
	do mconf Lunático 1 0 0
	do mconf Poring 0 0 0
	do mconf Drops 0 0 0
	do conf attackAuto 2
	]
	log ======== Indo matar lunaticos
	call voltarAtacar
}
}

automacro lockMap setado quando nao deveria {
	ConfigKeyNot lockMap none
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
	do conf lockMap none
	do conf attackAuto_inLockOnly 0

	}

}

automacro matei lunaticos {
QuestHuntCompleted 7124 1063
exclusive 1
InMap new_1-3, new_2-3, new_3-3
call {
	[
	call pararDeAtacar
	do mconf Lunático 0 0 0
	do mconf Poring 0 0 0
	do mconf Drops 0 0 0
	]
	do move &rand(103,105) &rand(36,38)
	pause 2
	log ======== terminando quest de lunaticos
	do talk &npc(/Mago/)
	do talk cont
	do talk resp 2 #Mago
	do conf quest_atual pickys_e_salgueiros
}
}

automacro começar quest pickys e salgueiros{
ConfigKey quest_atual pickys_e_salgueiros
NpcNear /Espadachim/
QuestInactive 7123, 7127
exclusive 1
run-once 1
InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
call {
	log ======== Indo pegar quest para  Picks
	pause 2
	do talk &npc(/Espadachim/)
	do talk cont
	do talk resp 2
	do talk cont
	do talk cont
	do talk cont
	pause 3
	log ======== Indo pegar quest para  Salgueiro
	do talk &npc(/Gatuno/)
	do talk cont
	do talk resp 2
	do talk cont
	do talk cont
}
}

automacro começar quest pickys e salgueiros bugged {
ConfigKey quest_atual pickys_e_salgueiros
NpcNotNear /Espadachim/
exclusive 1
run-once 1
QuestInactive 7123, 7127
call {
	do move &rand(103,105) &rand(36,38)
}
}
automacro mudar para treino mais pesado bugged {
	QuestActive 7123
	QuestActive 7127
	exclusive 1
	NpcNotNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call {
	do move &rand(103,105) &rand(36,38)

}
}
automacro mudar para treino mais pesado {
	QuestActive 7123
	QuestActive 7127
	exclusive 1
	NpcNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call {
		do move &rand(103,105) &rand(36,38)
		pause 3
		log ======== mudando pra mapa onde tem pickys e salgueiros
		do talk &npc(/Treinador/) #Treinador
		do talk cont
		do talk cont
		do talk cont
		do talk resp 1
		do talk cont
	}
}

automacro caçando pickys e Salgueiro {
QuestActive 7123, 7127
InMap new_4-3, new_5-3
run-once 1
exclusive 1
call {
	[
	do conf attackAuto 2
	do conf route_randomWalk 1
	do mconf Zangão 0 0 0
	do mconf Fabre 0 0 0
	do mconf Picky 1 0 0
	do mconf Salgueiro 1 0 0
	log ======== Indo matar pickys e salgueiros
	]
}
}

automacro se morrer enquanto mata pickys_e_salgueiros {
QuestActive 7123, 7127
CurrentHP >= 50%
IsInCoordinate 95 21
InMap new_1-3, new_2-3, new_3-3
exclusive 1
call {
	do mconf Lunático 0 0 0
	do conf attackAuto 0
	do conf route_randomWalk 0
	do move &rand(103,105) &rand(36,38)
	log ======== mudando pra mapa onde tem pickys e salgueiros
	do talk &npc(/Treinador/) #Treinador
	do talk cont
	do talk cont
	do talk cont
	do talk resp 1
	do talk cont
	do conf attackAuto 2
	do conf route_randomWalk 1
}
}

automacro matei pickys {
QuestHuntCompleted 7123 1049
exclusive 1
InMap new_4-3, new_5-3
run-once 1
call {
	[
	do mconf Zangão 0 0 0
	do mconf Fabre 0 0 0
	do mconf Picky 0 0 0
	do mconf Salgueiro 1 0 0
	do conf attackAuto 0
	do conf route_randomWalk 0
	]
	do move &rand(103,105) &rand(36,38)
	pause 2
	do talk &npc(/Espadachim/)
	do talk cont
	do talk resp 2
	do conf attackAuto 2
	do conf route_randomWalk 1

}
}
automacro matei salgueiros {
QuestHuntCompleted 7127 1010
exclusive 1
InMap new_4-3, new_5-3
run-once 1
call {
	[
	do mconf Zangão 0 0 0
	do mconf Fabre 0 0 0
	do mconf Picky 0 0 0
	do mconf Salgueiro 1 0 0
	do conf attackAuto 0
	do conf route_randomWalk 0
	]
	pause 2
	do move &rand(103,105) &rand(36,38)
	do talk &npc(/Gatuno/)
	do talk cont
	do talk resp 2
	log ======== Completei todas as Quests
	do conf quest_atual todas_completadas
}
}

automacro endleveling {
	exclusive 1
	JobLevel 10
	ConfigKey quest_atual todas_completadas
	ConfigKey classe espadachim, classe gatuno, classe mercador, classe noviço, classe mago, classe arqueiro
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	call {
	    call pararDeAtacar
		do move &rand(103,105) &rand(36,38)
		switch (&config(classe)) {
		  case (= espadachim) {
		    do talk &npc(/Espadachim/)
		  }
		  case (= gatuno) {
		    do talk &npc(/Gatuno/)
		  }
			case (= mercador) {
			  do talk &npc(/Mercador/)
			}
			case (= mago) {
			  do talk &npc(/Mago/)
			}
			case (= noviço) {
				do talk &npc(/Noviço/)
			}
			case (= arqueiro) {
			  do talk &npc(/Arqueiro/)
			}
		}
		do talk cont
		do talk resp 1
		do talk cont
		do talk cont
		do talk resp 1
		log ======== Agora vou virar &config(classe)!!!
		do conf quest_atual none
	}
}

automacro endleveling2 {
	exclusive 1
	JobLevel 10
	ConfigKey quest_atual todas_completadas
	ConfigKey classe Espadachim, classe Gatuno, classe Mercador, classe Noviço, classe Mago, classe Arqueiro
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	call {
	    call pararDeAtacar
		do move &rand(103,105) &rand(36,38)
		switch (&config(classe)) {
		  case (= Espadachim) {
		    do talk &npc(/Espadachim/)
		  }
		  case (= Gatuno) {
		    do talk &npc(/Gatuno/)
		  }
			case (= Mercador) {
			  do talk &npc(/Mercador/)
			}
			case (= Mago) {
			  do talk &npc(/Mago/)
			}
			case (= Noviço) {
				do talk &npc(/Noviço/)
			}
			case (= Arqueiro) {
			  do talk &npc(/Arqueiro/)
			}
		}
		do talk cont
		do talk resp 1
		do talk cont
		do talk cont
		do talk resp 1
		log ======== Agora vou virar &config(classe)!!!
		do conf quest_atual none
	}
}

automacro EndLeveling Bugged {
  JobLevel 10
	ConfigKey quest_eden todas_completadas
	ConfigKey classe none
	timeout 20
  exclusive 1
  call {
  log TEM UM PEQUENO ERRO
	log VOCE ESQUECEU DE COLOCAR NO CONFIG.TXT QUAL CLASSE QUER SER
	log PRA FAZER ISSO VC DIGITA AQUI NO CONSOLE
	log conf classe SEGUIDO DA CLASSE QUE QUER
	log VALORES POSSIVEIS: espadachim, mercador, mago, arqueiro, noviço, gatuno
	log EXEMPLO: conf classe espadachim
	log OUTRO EXEMPLO: conf classe mercador
	log ATE ISSO SER RESOLVIDO A MACRO NAO VAI PROSSEGUIR
  }
}

automacro seClasseNaoExistir {
  ConfigKeyNotExist classe
  exclusive 1
	priority -3
  call {
	log A config de classe ainda nao existe no config.txt
	log Vamos mudar isso
	add_key ("classe", "none")
	log Prontinho
  }
}

automacro virandoClasse1Bugged {
JobLevel = 10
NotInMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
SkillLevel NV_BASIC != 9
run-once 1
exclusive 1
call {
	log ======== As Habilidades básicas nao foram distribuídas!!!
	log ======== Vamos mudar isso
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do skills add NV_BASIC
	do conf skillsAddAuto 1
	do conf skillsAddAuto_list NV_BASIC 9
	}
}

automacro virandoEspadachim {
  InMap izlude_in
  JobID 0 #Aprendiz
  JobLevel 10
	SkillLevel NV_BASIC = 10
	priority 1
  exclusive 1
  call {
  do talk &npc(/Espadachim/)
  do talk cont
  do talk resp 1
  do talk cont
  do talk resp 0
  do talk cont
	pause 3
	call deixeiDeSerAprendiz
	$check = GetIndexAndEquipped("rightHand",13415) # alfange de iniciante
			if ($check != -1) {
				do eq $check
			}
	do iconf 13415 0 0 0
  }
}

automacro virandoNoviço {
  InMap prt_church
	JobLevel 10
	JobID 0
	SkillLevel NV_BASIC = 10
	priority 1
  exclusive 1
  call {
	do move prt_church &rand(182,184) &rand(36,38)
    do talk &npc(/Cleric|Padre/g)
	do talk cont
	do talk resp 0
	do talk cont
	do talk cont
	do talk cont
	pause 3
	call deixeiDeSerAprendiz
	$check = GetIndexAndEquipped("rightHand",1545) # Maça de iniciante
			if ($check != -1) {
				do eq $check
			}
			do iconf 1545 0 0 0
  }
}

automacro virandoMercador {
  InMap alberta_in
	JobLevel 10
	JobID 0
	SkillLevel NV_BASIC = 10
  exclusive 1
	priority 1
  call {
	do talk &npc(/Mercador/)
	do talk cont
	do talk resp 0
	do talk cont
	do talk cont
	do talk cont
	pause 3
	call deixeiDeSerAprendiz
	$check = GetIndexAndEquipped("rightHand",1381) # Machado de batalha de iniciante
			if ($check != -1) {
				do eq $check
			}
			do iconf 1381 0 0 0
  }
}

automacro virandoGatuno {
JobID 0
JobLevel 10
InMap moc_prydb1
priority 1
SkillLevel NV_BASIC = 10
exclusive 1
call {

	do move &rand(44,46) &rand(127,129)
	do talknpc 42 133 c r1 c r1 c c c c  #Mestre Gatuno
	pause 3
	call deixeiDeSerAprendiz
	$check = GetIndexAndEquipped("rightHand",13041) # main gauche de iniciante
			if ($check != -1) {
				do eq $check
			}
			do iconf 13041 0 0 0
}
}

automacro virandoArqueiro {
JobID 0
JobLevel 10
InMap payon_in02
exclusive 1
priority 1
call {
do talk &npc(/Arqueiro/)
do talk cont
do talk resp 0
do talk cont
do talk cont
do talk cont
pause 3
call deixeiDeSerAprendiz
#1742
$check = GetIndexAndEquipped("rightHand",1742) # arco composto de iniciante
		if ($check != -1) {
			do eq $check
		}
		do iconf 1742 0 0 0

}
}

automacro virandoMago {
JobID 0
JobLevel 10
InMap geffen_in
exclusive 1
priority 1
call {
do move &rand(162,165) &rand(123, 126)
do talk &npc(/Instrutora/)
do talk cont
do talk resp 0
do talk cont
do talk cont
do talk resp 0
do talk cont
do talk cont
do talk cont
pause 3
call deixeiDeSerAprendiz
$check = GetIndexAndEquipped("rightHand",1639) # cajado de iniciante
		if ($check != -1) {
			do eq $check
		}
		do iconf 1639 0 0 0
}
}

macro deixeiDeSerAprendiz {
do pconf Adaga do Aprendiz 0
do pconf Capuz do Aprendiz 0
do pconf Chapéu de Ovo do Aprendiz 0
do pconf Sandálias do Aprendiz 0
do pconf Traje do Aprendiz 0
do pconf Vembrassa do Aprendiz 0
#1243#Adaga_do_Aprendiz#
#2112#Vembrassa_do_Aprendiz#
#2414#Sandálias_do_Aprendiz#
#2510#Capuz_do_Aprendiz#
#2352#Traje_do_Aprendiz#
#5055#Chapéu_de_Ovo_do_Aprendiz#
#2393#Túnica de Iniciante#

$check = GetIndexAndEquipped("rightHand",1243) #Adaga_do_Aprendiz#
		if ($check != -1) {
			do drop $check
			pause 1
		}
$check = GetIndexAndEquipped("leftHand",2112)#Vembrassa_do_Aprendiz#
		if ($check != -1) {
			do drop $check
		}
$check = GetIndexAndEquipped("shoes",2414) #Sandálias_do_Aprendiz#
		if ($check != -1) {
			do drop $check
		}
$check = GetIndexAndEquipped("robe",2510) #Capuz_do_Aprendiz#
		if ($check != -1) {
			do drop $check
		}
$check = GetIndexAndEquipped("armor",2352) #Chapéu_de_Ovo_do_Aprendiz#
		if ($check != -1) {
			do drop $check
		}
$check = GetIndexAndEquipped("topHead",5055) #Chapéu_de_Ovo_do_Aprendiz#
		if ($check != -1) {
			do drop $check
		}
$check = GetIndexAndEquipped("armor",2393) #Tunica de iniciante
		if ($check != -1) {
			do eq $check
		}
}

automacro Up {
NotInMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
exclusive 1
timeout 300
priority 5
JobLevel != 50
call {
	switch ( $.lvl ) {
		case (<= 20) {
			if ( &config(lockMap) != pay_fild08) {
			[
			log configurando lockmap
			do conf lockMap pay_fild08
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if ( &config(saveMap) != payon) call SetSaveInPayon
		log UPANDO NOS ESPOROS
		stop
		}
		case (<= 30) {
		[
			if ( &config(lockMap) != pay_fild07 {
			do conf lockMap pay_fild07
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if ( &config(saveMap) != payon) call SetSaveInPayon
		log UPANDO NOS PÉ-GRANDE
		stop
		}
		case (<= 45) {
			[
			if ( &config(lockMap) != pay_fild09 {
			do conf lockMap pay_fild09
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if (&config(saveMap) != payon) call SetSaveInPayon
		log UPANDO NOS SALGUEIRO ANCIÃO
		stop
		}
		case (<= 55) {
			[
			if ( &config(lockMap) != gef_fild10 {
			do conf lockMap gef_fild10
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if( &config(saveMap) != prontera) call SetSaveInProntera
		log UPANDO NOS ORCS
		stop
		}
		case (<= 75) {
			[
			if ( &config( lockMap ) != moc_fild17 {
			do conf lockMap moc_fild17
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if ( &config(saveMap) != morocc ) call SetSaveInMorocc
		log UPANDO NOS HODE
		stop
		}
		case ( <= 86) {
			[
			if ( &config( lockMap ) != gef_fild06 {
			do conf lockMap gef_fild06
			do conf attackAuto 2
			do conf route_randomWalk 1
			]
			}
		if ( &config(saveMap) != geffen ) call SetSaveInGeffen
		log UPANDO NOS PETITE
		stop
		}
	}
}
}

automacro nivelDeClasse50 {
JobLevel = 50
exclusive 1
timeout 20
NotInMap izlude
	call {
	lock upComeço
	log SEU CHAR JÁ ESTÁ NO NIVEL 50 DE CLASSE
	log FAÇA A QUEST PARA VIRAR CLASSE 2 MANUALMENTE POR FAVOR
	log DEPOIS ABRA O BOT NOVAMENTE
	log ASSIM QUE ELE SE TORNAR UM CLASSE 2, A MACRO VOLTA A UPAR NORMALMENTE
	do conf lockMap none
	do conf attackAuto 1
	do conf route_randomWalk 0
	do move izlude
	}
}

automacro nivelDeClasse50EmIzlude {
InMap izlude
exclusive 1
timeout 20
call {
	log SEU CHAR JÁ ESTÁ NO NIVEL 50 DE CLASSE
	log FAÇA A QUEST PARA VIRAR CLASSE 2 MANUALMENTE POR FAVOR
	log DEPOIS ABRA O BOT NOVAMENTE
	log ASSIM QUE ELE SE TORNAR UM CLASSE 2, A MACRO VOLTA A UPAR NORMALMENTE
}
}

automacro LevelMaiorQue86 {
BaseLevel > 86
exclusive 1
run-once 1
call {
do move izlude
do move rachel
if ( &config(saveMap) != rachel ) call SetSaveinRachel
do conf lockMap ra_fild12
do conf attackAuto 2
do conf route_randomWalk 1
log UPANDO NOS ROWEEN
}
}

automacro LevelMaiorQue95 {
BaseLevel >= 94
exclusive 1
run-once 1
call {
do conf lockMap ve_fild03
if ( &config(saveMap) != rachel ) call SetSaveinRachel
do conf lockMap ra_fild12
do conf attackAuto 2
do conf route_randomWalk 1
log UPANDO NOS MAGMARING
}
}

automacro lvl99 {
BaseLevel = 99
exclusive 1
timeout 10
call {
log CHEGUEI NO LVL 99!!!
log UHUUUUUUUUUUUULLLLLLLLLL OBJETIVO COMPLETO
}
}


macro pararDeAtacar {
	[
	do conf route_randomWalk 0
	do conf attackAuto 0
	]
}
macro voltarAtacar {
	[
	do conf route_randomWalk 1
	do conf attackAuto 2
	]
}
automacro ConfigWasWrong {
    exclusive 1
    overrideAI 1
    priority -5
    ConfigKeyNot autoTalkCont 0, attackAuto_inLockOnly 0
    call {
        log Tem uma config que está errada
        log A config é $.ConfigKeyNotLastKey
        log O valor que quero é $.ConfigKeyNotLastWantedValue
        log Mas o valor atual é $.ConfigKeyNotLastKeyValue
        log O index é $.ConfigKeyNotLastMemberIndex
        log Mudando valor da config $.ConfigKeyNotLastKey de $.ConfigKeyNotLastKeyValue para $.ConfigKeyNotLastWantedValue
        do conf $.ConfigKeyNotLastKey $.ConfigKeyNotLastWantedValue
    }
}


#Save configurations
macro SetSaveinAldebaran {
    add_key("saveMap_wanted", "aldebaran")
    add_key("saveMap_kafra_position", "143 119")
    add_key("saveMap_sellNpc_position", "aldebaran 165 107")

    add_key("saveMap_save_sequence", "c r0")
    add_key("saveMap_storage_sequence", "c r1")
    add_key("In_saveMap_sequence", "true")
}

macro SetSaveinJuno {
    add_key("saveMap_wanted", "yuno")
    add_key("saveMap_kafra_position", "152 187")
    add_key("saveMap_sellNpc_position", "yuno_in01 25 34")

    add_key("saveMap_save_sequence", "c r0")
    add_key("saveMap_storage_sequence", "c r1 ")
    add_key("In_saveMap_sequence", "true")
}

macro SetSaveinRachel {
    add_key("saveMap_wanted", "rachel")
    add_key("saveMap_kafra_position", "109 138")
    add_key("saveMap_sellNpc_position", "rachel 65 80")

    add_key("saveMap_save_sequence", "c r0")
    add_key("saveMap_storage_sequence", "c r1")
    add_key("In_saveMap_sequence", "true")
}

 macro SetSaveInComodo {
    add_key("saveMap_wanted", "comodo")
    add_key("saveMap_kafra_position", "195 150")
    add_key("saveMap_sellNpc_position", "cmd_in01 79 182")

    add_key("saveMap_save_sequence", "c r0")
    add_key("saveMap_storage_sequence", "c r1 ")
    add_key("In_saveMap_sequence", "true")
 }

macro SetSaveinProntera {

    add_key("saveMap_wanted", "prontera")
    add_key("saveMap_kafra_position", "151 29")
    add_key("saveMap_sellNpc_position", "prontera 113 42")

    add_key("saveMap_save_sequence", "c r0")
    add_key("saveMap_storage_sequence", "c r1")
    add_key("In_saveMap_sequence", "true")
}

macro SetSaveInPayon {
	add_key("saveMap_wanted", "payon")
	add_key("saveMap_kafra_position", "181 104")
	add_key("saveMap_sellNpc_position", "payon_in01 5 49")

	add_key("saveMap_save_sequence", "c r0")
	add_key("saveMap_storage_sequence", "c r1")
	add_key("In_saveMap_sequence", "true")
}

macro SetSaveInSewb {
	add_key("saveMap_wanted", "prt_fild05")
	add_key("saveMap_kafra_position", "290 224")
	add_key("saveMap_sellNpc_position", "prt_fild05 290 221")

	add_key("saveMap_save_sequence", "c r0")
	add_key("saveMap_storage_sequence", "c r1")
	add_key("In_saveMap_sequence", "true")
}

macro SetSaveInGeffen {
	add_key("saveMap_wanted", "geffen")
	add_key("saveMap_kafra_position", "120 62")
	add_key("saveMap_sellNpc_position", "geffen_in 74 144")

	add_key("saveMap_save_sequence", "c r0")
	add_key("saveMap_storage_sequence", "c r1")
	add_key("In_saveMap_sequence", "true")
}

macro SetSaveInMorocc {
	add_key("saveMap_wanted", "morocc")
	add_key("saveMap_kafra_position", "156 97")
	add_key("saveMap_sellNpc_position", "morocc_in 141 67")

	add_key("saveMap_save_sequence", "c r0 ")
	add_key("saveMap_storage_sequence", "c r1")
	add_key("In_saveMap_sequence", "true")
}

#### Kafra Save
automacro set_savemap_variables {
	exclusive 1
	run-once 1
	ConfigKey In_saveMap_sequence true
	priority -4
	call {
		$saveMap = &config(saveMap_wanted)
	}
}

automacro moveLocKafraOutside {
	exclusive 1
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap_wanted none
	ConfigKeyNot saveMap $saveMap
	NotInMap $saveMap
	call move_to_near_kafra
}

automacro moveLocKafraInside {
	exclusive 1
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	NpcNotNear /(Kafra Employee|Funcionária Kafra)/
	InMap $saveMap
	call move_to_near_kafra
}

macro move_to_near_kafra {
	do move $saveMap &config(saveMap_kafra_position) &random("1","2","3","4","5","6")
}

automacro talkKafraEmployee {
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	InMap $saveMap
	NpcNear /(Kafra Employee|Funcionária Kafra)/
	delay 2
	timeout 20
	call {
		log talking to kafra at '&arg("$.NpcNearLastPos", 1) &arg("$.NpcNearLastPos", 2)' using sequence '&config(saveMap_save_sequence)'
		do talknpc &arg("$.NpcNearLastPos", 1) &arg("$.NpcNearLastPos", 2) &config(saveMap_save_sequence)
	}
}

automacro SavedAtKafra {
	exclusive 1
	priority -5
	NpcMsgName /O seu Ponto de Retorno foi salvo/ /(Kafra Employee|Funcionária Kafra)/
	ConfigKeyNot saveMap $saveMap
	ConfigKey In_saveMap_sequence true
	InMap $saveMap
	call {
		do conf saveMap $saveMap
		do conf storageAuto_npc $saveMap &config(saveMap_kafra_position)
		do conf storageAuto 1
		do conf sellAuto 1
		do conf sellAuto_npc &config(saveMap_sellNpc_position)
		do conf storageAuto_npc_type 3
		do conf storageAuto_npc_steps &config(saveMap_storage_sequence)
		do conf In_saveMap_sequence false
		do conf saveMap_save_sequence none
		do conf saveMap_storage_sequence none
		do conf saveMap_wanted none
		do conf saveMap_kafra_position none
		do conf saveMap_sellNpc_position none
		release set_savemap_variables
	}
}


sub GetIndexAndEquipped {
	my ($type, $id) = @_;
	my $Item = $char->inventory->getByNameID($id);
	my $EquipIndex = $Item->{invIndex};
	if (my $equipItem = $char->{equipment}{$1}) {
		if ($equipItem->{nameID} == $id) {
			return -1;
		} else {
			return $EquipIndex;
		}
	} else {
		return $EquipIndex;
	}
}

sub GetNamenyNameID {
	my $name = $items_lut{$_[0]};
	return $name;
}

sub nextMap {
	my $map = $_[0];
	if ($map =~ /^new_(\d)-(\d)$/) {
		return "new_".$1."-".($2+1);
	} else {
		return 0;
	}
}

sub add_key {
	my ($key, $value) = @_;
	configModify($key, $value);
}
