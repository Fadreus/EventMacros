#campo dos aprendizes by HenryBK and Nipodemos

automacro moveToSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNotNear /Sprakki/
	QuestInactive 7117
	call {
		do move 52 113
	}
}

automacro TalkSprakkiOutside {
	exclusive 1
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	BaseLevel = 1
	NpcNear /Sprakki/
	QuestInactive 7117
	call {
		[
		do conf autoMoveOnDeath 1
		do conf autoMoveOnDeath_x none
		do conf autoMoveOnDeath_y none
		do conf autoMoveOnDeath_map none
		do conf saveMap none
		do conf saveMap_warpToBuyOrSell 0
		do conf sellAuto 0
		do conf storageAuto 0
		do conf storageAuto_npc none
		do conf getAuto_0 none
		do conf autoTalkCont 1
		do conf sitAuto_idle 0
		do conf sitAuto_hp_lower 40
		do conf sitAuto_hp_upper 80
		do conf itemsTakeAuto 0
		do conf itemsGatherAuto 0
		do conf lockMap none
		do conf attackAuto_inLockOnly 0
		do conf route_randomWalk 0
		do conf statsAddAuto 1
		do conf statsAddAuto_list 10 dex, 15 agi, 20 dex, 25 agi, 20 str, 30 dex, 60 agi, 30 str, 40 dex, 20 vit, 80 agi, 25 luk ,60 dex, 50 str, 40 luk, 90 agi, 60 str, 29 vit
		do conf statsAddAuto_dontUseBonus 1
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9, TF_DOUBLE 10, TF_MISS 10, TF_STEAL 10, TF_HIDING 8, TF_POISON 10, TF_DETOXIFY 1, RG_SNATCHER 10, RG_STEALCOIN 10, RG_BACKSTAP 4, RG_TUNNELDRIVE 5, RG_RAID 5, RG_INTIMIDATE 5, RG_PLAGIARISM 10
		do conf itemsMaxWeight 49
		do conf itemsMaxWeight_sellOrStore 48
		do conf itemsMaxNum_sellOrStore 99
		do iconf 12323 0 0 0
		do iconf 12324 0 0 0
		do iconf 569 0 0 0
		do iconf 7059 50 0 0
		do iconf 7060 50 0 0
		do iconf 13040 0 0 0
		do iconf 1243 0 0 0
		do iconf 2112 0 0 0
		do iconf 5055 0 0 0
		do iconf 2414 0 0 0
		do iconf 2510 0 0 0
		do iconf 2352 0 0 0
		do iconf 1201 0 0 0
		do iconf 13041 0 0 0
		do iconf 2393 0 0 0
		do iconf 2301 0 0 0
		]
		do talk $.NpcNearLastBinId
	}
}

automacro moveInside {
	exclusive 1
	QuestActive 7117
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

automacro moveInsideBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	InMap new_1-1, new_2-1, new_3-1, new_4-1, new_5-1
	priority 1
	call GotoInside
}

macro GotoInside {
	$nextMap = nextMap("$.map")
	do move $nextMap 101 29
}

automacro moveNextToSprakki {
	exclusive 1
	QuestActive 7117
	NpcNotNear /Sprakki/
	BaseLevel = 1
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

automacro moveNextToSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNotNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call GotoSpraki
}

macro GotoSpraki {
	do move 101 29
}

automacro talkSprakkiBugged1 {
	exclusive 1
	QuestInactive 7117
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

automacro talkSprakkiBugged2 {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call SprakiiBuggedTalk
}

macro SprakiiBuggedTalk {
	do talk $.NpcNearLastBinId
	
}

automacro talkSprakki {
	exclusive 1
	QuestActive 7117
	BaseLevel = 1
	NpcNear /Sprakki/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
		do talk resp 0
	}
}

automacro moveNextToBrade1 {
	exclusive 1
	QuestActive 7118
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade
}

automacro moveNextToBrade2 {
	exclusive 1
	QuestActive 7119
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 2
	call MoveToBrade
}

macro MoveToBrade {
	do move 103 105
}

automacro talkBrade {
	exclusive 1
	QuestActive 7118
	BaseLevel = 2
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
	}
}


automacro moveNextToBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0
	NpcNotNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 1
	call MoveToBrade
}

automacro talkBradeBugged {
	exclusive 1
	QuestInactive 7118
	QuestInactive 7119
	BaseLevel = 3
	InInventoryID 5055 = 0
	NpcNear /Brade/
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	priority 0
	call {
		do talk $.NpcNearLastBinId
	}
}

automacro equipStuffForBrade {
	exclusive 1
	QuestActive 7119
	IsNotEquippedID topHead 5055, leftHand 2112, robe 2510, shoes 2414, armor 2352, rightHand 1243
	call {
		$check = GetIndexAndEquipped("topHead", 5055)
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("robe", 2510)
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes",2414)
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor",2352)
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("leftHand",2112)
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand",1243)
		if ($check != -1) do eq $check
	}
}

automacro talkBradeSecond {
	exclusive 1
	QuestActive 7119
	BaseLevel = 3
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
	}
}

automacro BradeBuggedNo7120MoveJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 0
	NpcNotNear /Jinha/
	call MoveJinha
}

automacro moveToGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNotNear /Jinha/
	SkillLevel NV_FIRSTAID = 0
	priority 0
	call MoveJinha
}

macro MoveJinha {
	do move 107 108
}

automacro BradeBuggedNo7120TalkJinha {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 0
	NpcNear /Jinha/
	call TalkJinha
}

automacro talkGirlSkill {
	exclusive 1
	QuestActive 7120
	NpcNear /Jinha/
	SkillLevel NV_FIRSTAID = 0
	priority 0
	call TalkJinha
}

macro TalkJinha {
	do talk $.NpcNearLastBinId
	do talk resp 0
}

automacro BradeBuggedNo7120MoveBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	InInventoryID 2393 = 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 1
	NpcNotNear /Brade/
	call MoveToBrade
}

automacro BradeBuggedNo7120TalkBrade {
	exclusive 1
	QuestInactive 7119
	QuestInactive 7120
	BaseLevel = 4
	InInventoryID 12324 > 0
	InInventoryID 2393 = 0
	IsEquippedID topHead 5055
	IsEquippedID leftHand 2112
	IsEquippedID rightHand 1243
	IsEquippedID robe 2510
	IsEquippedID armor 2352
	IsEquippedID shoes 2414
	SkillLevel NV_FIRSTAID = 1
	NpcNear /Brade/
	call TalkBradeGetTunic
}

automacro talkBradeThird {
	exclusive 1
	QuestActive 7120
	SkillLevel NV_FIRSTAID = 1
	NpcNear /Brade/
	priority 0
	call TalkBradeGetTunic
}

macro TalkBradeGetTunic {
	do talk $.NpcNearLastBinId
}

automacro equipStuffForGirl {
	exclusive 1
	QuestInactive 7120
	InInventoryID 2393 = 1
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	IsNotEquippedID armor 2393
	call {
		$check = GetIndexAndEquipped("armor", 2393)
		if ($check != -1) {
			do eq $check
		}
	}
}

automacro moveNextToChoco {
	exclusive 1
	IsEquippedID armor 2393
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNotNear /Choco/
	priority 1
	call {
		do move 32 171
	}
}

automacro talkChoco {
	exclusive 1
	QuestInactive 7120
	QuestInactive 7121
	IsEquippedID armor 2393
	InMap new_1-2, new_2-2, new_3-2, new_4-2, new_5-2
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do conf -f  current_npc kafra
	}
}

automacro moveNextToGuys {
	exclusive 1
	QuestActive 7121
	NpcNotNear /(Choco|Kafra|Zonda|Soldado)/
	priority 0
	call {
		do move 32 171
	}
}
automacro talkToGuysBugged {
	exclusive 1
	QuestActive 7121
	ConfigKeyNotExist current_npc
	NpcNear /Kafra/
	call {
		log Há um bug, a config $.ConfigKeyNotExistLastKey já deveria existir nesse ponto
		log Mas ainda não existe
		log Mudando isso:
		do conf -f current_npc kafra
	}
}

automacro talkKafra {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc kafra
	NpcNear /Kafra/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 4
		do conf current_npc zonda
	}
}

automacro talkZonda {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc zonda
	NpcNear /Zonda|Corp/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc soldado
	}
}

automacro talkSoldado {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc soldado
	NpcNear /Soldado|Guide/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc choco
	}
}

automacro talkChocoAgain {
	exclusive 1
	QuestActive 7121
	ConfigKey current_npc choco
	NpcNear /Choco/
	call {
		do talk $.NpcNearLastBinId
		do conf current_npc kafra
		
	}
}

automacro moveBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

automacro talkBradeonGroundsGetQuest {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 0
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do conf route_randomWalk 1
		do conf itemsTakeAuto 2
		$potName = GetNamenyNameID(569)
		do conf useSelf_item_0 $potName
		do conf useSelf_item_0_disabled 0
		do conf useSelf_item_0_hp < 60%
		do conf getAuto_0 $potName
		do conf getAuto_0_minAmount 20
		do conf getAuto_0_maxAmount 200
		do conf getAuto_0_passive 0
		do mconf 1063 0 0 0
		do mconf 1002 1 0 0
		do mconf 1113 0 0 0
		call voltarAtacar
	}
}

automacro usarPocaoDeApreniz {
	ConfigKeyNot useSelf_item_0 Poção de Aprendiz
	InInventory "Poção de Aprendiz" > 0
	exclusive 1
	call {
		log parece que tenho poção de aprendiz, mas ainda não foi configurado pra ser usado
		log mudando isso
		$potName = GetNamenyNameID(569)
		do conf useSelf_item_0 $potName
		do conf useSelf_item_0_disabled 0
		do conf useSelf_item_0_hp < 60%
		do conf getAuto_0 $potName
		do conf getAuto_0_minAmount 20
		do conf getAuto_0_maxAmount 200
		do conf getAuto_0_passive 0
		log pronto
	}
}

automacro moveBradeCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNotNear /Brade/
	priority 1
	call moveBradeGrounds
}

macro moveBradeGrounds {
	do mconf 1063 0 0 0
	do mconf 1002 0 0 0
	do mconf 1113 0 0 0
	call pararDeAtacar
	do move 99 31
}

automacro talkBradeonGroundsCompleteQuest {
	exclusive 1
	QuestHuntCompleted 7122 1002
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	NpcNear /Brade/
	call {
		do talk $.NpcNearLastBinId
		do conf -f quest_atual lunaticos
	}
}

automacro equipStuffForBradeGrounds {
	exclusive 1
	QuestInactive 7122
	InInventoryID 13040 = 1
	IsNotEquippedID rightHand 13040
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		$check = GetIndexAndEquipped("rightHand", 13040)
		if ($check != -1) do eq $check
	}
}

automacro LastBradeBug {
	NpcMsg /Você ainda está no processo de treinamento/
	exclusive 1
	priority 0
	call {
		log Acabou de ocorrer um bug na sequencia do campo de treinamento
		log Resolvendo isso
		call moveBradeGrounds
		do talk &npc(/Brade/)
		do conf -f quest_atual lunaticos
	}
}

automacro questLunaticoBugged {
	QuestHuntCompleted 7122 1002
	ConfigKey quest_atual lunaticos
	exclusive 1
	call {
		log Acabou de ocorrer um bug na sequencia do campo de treinamento
		log Resolvendo isso
		call moveBradeGrounds
		do talk &npc(/Brade/)		
	}
}

# Quest de lunaticos , pickys e salgueiros by Nipodemos
# Inspirada na macro de 1 a 99 do CALF
automacro irAteQuestLunatico {
	ConfigKey quest_atual lunaticos
	exclusive 1
	NpcNotNear /Mago|Mage/
	QuestInactive 7124
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro começarQuestLunaticos {
	ConfigKey quest_atual lunaticos
	exclusive 1
	QuestInactive 7124
	NpcNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	run-once 1
	call {
		do talk $.NpcNearLastBinId
		do talk resp 2
	}
}

automacro caçandoLunaticos {
	QuestActive 7124
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3
	run-once 1
	call {
		[
		do mconf 1063 1 0 0 #lunatico
		do mconf 1002 0 0 0 #poring
		do mconf 1113 0 0 0 #drops
		]
		call voltarAtacar
		log ======== Indo matar lunaticos
	}
}

automacro lockMap setado quando nao deveria {
	ConfigKeyNot lockMap none
	exclusive 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		do conf lockMap none
		do conf attackAuto_inLockOnly 0
	}
	
}

macro moverPertoDosNpc {
	log indo pra perto dos Npcs
	call pararDeAtacar
	do move &rand(103,105) &rand(36,38)
	pause 1
}

automacro mateiLunaticosIndoAteoNpc {
	QuestHuntCompleted 7124 1063
	exclusive 1
	NpcNotNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3
	call moverPertoDosNpc
}

automacro mateiLunaticos {
	ConfigKey quest_atual lunaticos
	exclusive 1
	QuestHuntCompleted 7124 1063
	NpcNear /Mago|Mage/
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		do mconf 1063 0 0 0 #lunatico
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual pickys
	}
}

automacro ComeçarQuestPickyMoverPerto {
	ConfigKey quest_atual pickys
	NpcNotNear /Espadachim|Swordman/
	QuestInactive 7123
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro começarQuestPicky {
	ConfigKey quest_atual pickys
	NpcNear /Espadachim|Swordman/
	QuestInactive 7123
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		log Indo pegar quest para  Picks
		pause 2
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual salgueiros
	}
}

automacro começarQuestSalgueiroMoverPerto {
	NpcNotNear /Thief|Gatuno/
	ConfigKey quest_atual salgueiros
	QuestActive 7123
	QuestInactive 7127
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call moverPertoDosNpc
}

automacro começarQuestSalgueiro {
	ConfigKey quest_atual salgueiros
	QuestActive 7123
	QuestInactive 7127
	NpcNear /Thief|Gatuno/
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		log Indo pegar quest para  Salgueiro
		do talk $.NpcNearLastBinId
		do talk resp 2
		do conf -f quest_atual none
	}
}

automacro changeToHeavierTrainingMoveClose {
	QuestActive 7123
	QuestActive 7127
	exclusive 1
	NpcNotNear /Trainer/
	InMap new_1-3, new_2-3, new_3-3
	ConfigKey master RMS Renewal Test Server
	call {
		do move &rand(103,105) &rand(36,38)
	}
}
	
automacro changeToHeavierTraining {
	QuestActive 7123
	QuestActive 7127
	exclusive 1
	NpcNear /Trainer/
	InMap new_1-3, new_2-3, new_3-3
	ConfigKeyNot master Brazil - bRO: Thor
	call {
		log mudando pra mapa onde tem pickys e salgueiros
		do talk $.NpcNearLastBinId #Treinador
		do talk resp 0
		do talk resp /5/
	}
}

automacro treinoMaisPesadoMoverPerto {
	QuestActive 7123
	QuestActive 7127
	ConfigKeyNot master RMS Renewal Test Server
	exclusive 1
	NpcNotNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call moverPertoDosNpc
}

automacro treinoMaisPesado {
	QuestActive 7123
	QuestActive 7127
	ConfigKeyNot master RMS Renewal Test Server
	exclusive 1
	NpcNear /Treinador/
	InMap new_1-3, new_2-3, new_3-3
	call {
		log mudando pra mapa onde tem pickys e salgueiros
		do talk $.NpcNearLastBinId #Treinador
		do talk resp 1
	}
}

automacro caçandoPickys {
	QuestHuntOngoing 7123 1049
	InMap new_4-3, new_5-3
	timeout 60
	exclusive 1
	call sePreparandoPraMatar 
}

automacro caçandoSalgueiro {
	QuestHuntOngoing 7127 1010
	InMap new_4-3, new_5-3
	timeout 60
	exclusive 1
	call sePreparandoPraMatar 
}

macro sePreparandoPraMatar {
	call voltarAtacar
	do mconf 1113 0 0 0 #drops
	do mconf 1004 0 0 0 #zangao
	do mconf 1007 0 0 0 #fabre
	do mconf $.QuestHuntOngoingLastMobID 1 0 0 
	log ======== Indo matar pickys e salgueiros
}

automacro mateiPickysIndoAteNpc {
	QuestHuntCompleted 7123 1049
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNotNear /Espadachi|Swordman/i
	call moverPertoDosNpc
}

automacro mateiPickys {
	QuestHuntCompleted 7123 1049
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNear /Espadachi|Swordman/i
	call {
		do mconf 1004 0 0 0 #zangao
		do mconf 1007 0 0 0 #fabre
		do mconf 1049 0 0 0 #Picky
		do talk $.NpcNearLastBinId
		do talk resp 2
		call voltarAtacar
	}
}

automacro mateiSalgueirosIndoAteNpc {
	QuestHuntCompleted 7127 1010
	exclusive 1
	InMap new_4-3, new_5-3
	NpcNotNear /Gatuno|Thief/i
	call moverPertoDosNpc
}

automacro mateiSalgueiros {
	QuestHuntCompleted 7127 1010
	exclusive 1
	NpcNear /Gatuno|Thief/i
	InMap new_4-3, new_5-3
	call {
		do mconf 1004 0 0 0 #zangao
		do mconf 1007 0 0 0 #fabre
		do mconf 1049 0 0 0 #Picky
		do mconf 1010 0 0 0 #Salgueiro
		do talk $.NpcNearLastBinId
		do talk resp 2
		log ======== Completei todas as Quests
		do conf quest_atual todas_completadas
	}
}

automacro completeiTodasAsQuests {
	JobLevel = 10
	BaseLevel < 12
	ConfigKeyNot quest_atual todas_completadas
	QuestInactive 7127
	QuestInactive 7123
	QuestInactive 7124
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		do conf quest_atual todas_completadas
	}
}

automacro continuarUpandoAte12 {
	ConfigKey quest_atual todas_completadas
	QuestInactive 7127
	QuestInactive 7123
	QuestInactive 7124
	BaseLevel < 12
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		[
		do mconf 1004 1 0 0 #zangao
		do mconf 1007 1 0 0 #fabre
		do mconf 1049 1 0 0 #Picky
		do mconf 1010 1 0 0 #Salgueiro
		do mconf 1063 1 0 0 #lunatico
		do mconf 1002 1 0 0 #poring
		do mconf 1113 1 0 0 #drops
		call voltarAtacar
		]
		log Vou continuar upando até chegar nivel 12
	}
}
automacro continuar upando ate 12 bugged {
	ConfigKey quest_atual todas_completadas
	QuestActive 7127, 7123, 7124
	BaseLevel < 12
	exclusive 1
	run-once 1
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	call {
		log Deveria upar ate o lvl 12 agora, mas nao completamos uma das quests
		log O número da quest é $.QuestActiveLastID
		log Resolvendo isso
		log Se vc ver essa mensagem mais de uma vez provavelmente a macro está bugada
		switch ( $.QuestActiveLastID ) {
			case (= 7124) {
				do conf quest_atual lunaticos
			}
			case (= 7123) {
				do conf quest_atual pickys
			}
			else {
				do conf quest_atual salgueiros
			}
		}
	}
}


automacro seMorrerEnquantoUpaAteLv12 {
	ConfigKey quest_atual todas_completadas
	CurrentHP >= 50%
	IsInCoordinate 95 21
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call mudarDeMapa
}

automacro se morrer enquanto mata pickys_e_salgueiros {
	QuestActive 7123, 7127
	CurrentHP >= 50%
	IsInCoordinate 95 21
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call mudarDeMapa
}

macro mudarDeMapa {
	do mconf 1063 0 0 0 #lunatico
	call pararDeAtacar
	do move &rand(103,105) &rand(36,38)
	log ======== mudando pra mapa onde tem pickys e salgueiros
	do talk &npc(/Treinador/) #Treinador
	do talk resp 1
	call voltarAtacar
}

automacro ifDieWhileKillPickyAndWillow {
	QuestActive 7123, 7127
	CurrentHP >= 50%
	IsInCoordinate 95 21
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call changeMap
}

automacro ifDieWhileLevelingto12 {
	ConfigKey quest_atual todas_completadas
	CurrentHP >= 50%
	IsInCoordinate 95 21
	InMap new_1-3, new_2-3, new_3-3
	exclusive 1
	call changeMap
}

macro changeMap {
	call pararDeAtacar
	do move &rand(103,105) &rand(36,38)
	log ======== mudando pra mapa onde tem pickys e salgueiros
	do talk &npc(/Trainer/) #Treinador
	do talk resp 0
	do talk resp /5/
	call voltarAtacar
}

automacro endlevelingIrAteNpc {
	exclusive 1
	JobLevel 10
	BaseLevel > 11
	QuestInactive 7123
	QuestInactive 7124
	QuestInactive 7127
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	NpcNotNear /Thief|Gatuno/
	call moverPertoDosNpc
}

automacro endleveling {
	exclusive 1
	JobLevel 10
	BaseLevel > 11
	QuestInactive 7123
	QuestInactive 7124
	QuestInactive 7127
	InMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	priority 1
	NpcNear /Thief|Gatuno/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 1
		log Agora vou virar gatuno!!!
		do conf quest_atual none
	}
}

automacro virandoGatunoBugged {
	JobLevel = 10
	InMap moc_prydb1
	SkillLevel NV_BASIC != 9
	FreeSkillPoints >= 1
	exclusive 1
	call {
		$pontos = $.SkillLevelLastLevel
		log As Habilidades básicas nao foram distribuídas!!!
		log A skill ta lvl $.SkillLevelLastLevel
		log Mudando isso
		while ($pontos < 9 ) as loop
		do skills add NV_BASIC
		$pontos++
		end loop
		do conf skillsAddAuto 1
		do conf skillsAddAuto_list NV_BASIC 9, TF_DOUBLE 10, TF_MISS 10, TF_STEAL 10, TF_HIDING 8, TF_POISON 10, TF_DETOXIFY 1, RG_SNATCHER 10, RG_STEALCOIN 10, RG_BACKSTAP 4, RG_TUNNELDRIVE 5, RG_RAID 5, RG_INTIMIDATE 5, RG_PLAGIARISM 10
	}
}

#virar gatuno na pirâmide e ir para o grupo Eden
automacro dentroDaPiramide {
	NpcNotNear /Guild/
	InMap moc_prydb1
	JobID 0
	SkillLevel NV_BASIC = 9
	run-once 1
	exclusive 1
	call {
		call pararDeAtacar
		do conf lockMap none
		do move &rand(44,46) &rand(127,129)
	}
}

automacro virando gatuno {
	InMap moc_prydb1
	JobID 0
	NpcNear /Guild/
	SkillLevel NV_BASIC = 9
	run-once 1
	exclusive 1
	call {
		#do talknpc 42 133 c r1 c r1 c c c c  #Thief GuildMan
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 1
	}
}

automacro jaSouGatuno {
	InMap moc_prydb1
	JobID 6
	InInventoryID 2414 = 1
	exclusive 1
	call {
		do pconf 1243 0 #1243#Adaga_do_Aprendiz#
		do pconf 2112 0 #2112#Vembrassa_do_Aprendiz#
		do pconf 2414 0 #2414#Sandálias_do_Aprendiz#
		do pconf 2510 0 #2510#Capuz_do_Aprendiz#
		do pconf 2532 0 #2352#Traje_do_Aprendiz#
		do pconf 5055 0 #5055#Chapéu_de_Ovo_do_Aprendiz#
		do iconf 13041 0 0 0 #13041#Main Gauche de Iniciante#
		do iconf 2393 0 0 0 #Tunica de Iniciante
		$check = GetIndexAndEquipped("rightHand", 1243) #Adaga_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("leftHand", 2112)#Vembrassa_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("shoes", 2414) #Sandálias_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("robe", 2510) #Capuz_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("armor", 2352) #Chapéu_de_Ovo_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("topHead", 5055) #Chapéu_de_Ovo_do_Aprendiz#
		if ($check != -1) do drop $check
		$check = GetIndexAndEquipped("rightHand", 13041) # main gauche de iniciante
		if ($check != -1) do eq $check 
		$check = GetIndexAndEquipped("armor", 2393) #Tunica de Iniciante
		if ($check != -1) do eq $check
	}
}

automacro EdenJoinMoveNpc {
	InInventoryID 6219 = 0
	exclusive 1
	BaseLevel >= 12
	ConfigKeyNot membroDoEden sim
	NpcNotNear /Lenore|Lime/
	JobIDNot 0
	run-once 1
	call {
		do move moc_para01 &rand(33,35) &rand(25,27) #posição otima no Eden
	}
}

automacro EdenJoinTalkNpc {
	InInventory "Emblema do Grupo Valhalla" = 0
	ConfigKeyNot membroDoEden sim
	exclusive 1
	run-once 1
	NpcNear /Lenore|Lime/
	call {
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 0
		do talk text lolol
		do talk text lolol
		do talk resp 4
		do iconf 6219 0 0 0
		do conf -f membroDoEden sim
	}
}

automacro EdenJoinedBugged {
	InInventoryID 6219 = 1
	ConfigKeyNotExist membroDoEden
	exclusive 1
	run-once 1
	call {
		do conf -f membroDoEden sim
	}
}
automacro iniciandoQuestEden12MoverPerto {
	NpcNotNear /Boya/
	InInventoryID 6219 = 1
	BaseLevel 12..18
	exclusive 1
	JobID 6 #gatuno
	QuestInactive 7128
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15009
	InInventoryID 15009 = 0
	call moverPertoDosNpcEden
}

automacro iniciandoQuestEden12 {
	NpcNear /Boya/
	InInventoryID 6219 = 1
	BaseLevel 12..18
	exclusive 1
	JobID 6 #gatuno
	QuestInactive 7128
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15009
	InInventoryID 15009 = 0
	call {
		#do talknpc 25 35 c r1 c c c c c r0 c r0 c c c c c c #Boya
		log $.NpcNearLastBinId
		do talk $.NpcNearLastBinId
		do talk resp 1
		do talk resp 0
		do talk resp 0
	}
}

automacro iniciandoQuestEden26MoverPerto {
	NpcNotNear /Boya/
	BaseLevel 26..32
	InInventoryID 6219 = 1
	JobID 6 #gatuno
	exclusive 1
	QuestInactive 7138
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15010
	InInventoryID 15010 = 0
	call moverPertoDosNpcEden
}

automacro iniciandoQuestEden26 {
	NpcNear /Boya/
	BaseLevel 26..32
	InInventoryID 6219 = 1
	JobID 6 #gatuno
	exclusive 1
	QuestInactive 7138
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15010
	InInventoryID 15010 = 0
	call {
		#do talknpc 25 35 c c r1 c c c c c c #Boya
		do talk $.NpcNearLastBinId
		do talk resp 1
	}
}

automacro IniciandoQuestEden40MoverPerto {
	NpcNotNear /Boya/
	BaseLevel 40..49
	InInventoryID 6219 = 1
	JobID 6 #gatuno
	exclusive 1
	QuestInactive 7147
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15011
	InInventoryID 15011 = 0
	call moverPertoDosNpcEden
}

automacro IniciandoQuestEden40 {
	NpcNear /Boya/
	BaseLevel 40..49
	InInventoryID 6219 = 1
	JobID 6 #gatuno
	exclusive 1
	QuestInactive 7147
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15011
	InInventoryID 15011 = 0
	call {
		#do talknpc 25 35 c r0 c c c c c c #Boya
		do talk $.NpcNearLastBinId
		do talk resp 0
	}
}

automacro inciandoQuestEden60MoverPerto {
	NpcNotNear /Ur/
	BaseLevel 60..69
	exclusive 1
	InInventoryID 6219 = 1
	JobID 17 #arruaceiro
	QuestInactive 7214
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15031
	InInventoryID 15031 = 0
	call moverPertoDosNpcEden
}

automacro inciandoQuestEden60 {
	NpcNear /Ur/
	BaseLevel 60..69
	exclusive 1
	InInventoryID 6219 = 1
	JobID 17 #arruaceiro
	QuestInactive 7214
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	IsNotEquippedID armor 15031
	InInventoryID 15031 = 0
	call {
		#do talknpc 23 35 c r0 c c c c c r1 c c c c c c #Uru
		do talk $.NpcNearLastBinId
		do talk resp 0
		do talk resp 1
	}
}

macro moverPertoDosNpcEden {
	do conf lockMap none
	call pararDeAtacar
	do move moc_para01 &rand(33,35) &rand(25,27) #posição otima no Eden
}

automacro Eden12salvarNaKafra {
	QuestActive 7128
	exclusive 1
	BaseLevel 15..25
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap morocc
	call {
		call SetSaveIn "morocc"
	}
}

automacro Eden12IrNoMapa {
	QuestActive 7128
	exclusive 1
	BaseLevel 15..25
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap morocc
	call {
		#eden 12
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 12
		do move moc_fild11 &rand(181,183) &rand(254,256)
		do talk 0 #cão falante
		do talk resp 1
		do mconf Filhote de Lobo 0 0 0
		do mconf Escorpião 0 0 0
		do mconf Condor 0 0 0
	}
}

automacro Eden26SalvarNaKafra {
	QuestActive 7138
	BaseLevel 30..39
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap payon
	call {
		call SetSaveIn "payon"
	}
}

automacro Eden26IrNoMapa {
	QuestActive 7138
	BaseLevel 30..39
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap payon
	call {
		#eden 26
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 26
		do move pay_arche &rand(44,46) &rand(132,134)
		#do talknpc 41 136 c c c c c c c c #Coral
		do talk &npc( 41 136 )
		do mconf Esqueleto 0 0 0
		do mconf Poporing 0 0 0
		do mconf Zumbi 0 0 0
	}
}

automacro Eden40SalvarNaKafra {
	QuestActive 7147
	BaseLevel 49..59
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap prontera
	call {
		call SetSaveIn "prontera"
	}
}

automacro Eden40IrNoMapa {
	QuestActive 7147
	BaseLevel 50..59
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap prontera
	call {
		#eden 40
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 40
		do move in_orcs01 &rand(34,36) &rand(162,164)
		do talk 0 #Absalon
		do mconf Guerreiro Orc 0 0 0
		do mconf Filhote de Orc 0 0 0
		do mconf Senhora Orc 0 0 0
	}	
}

automacro Eden60SalvarNaKafra {
	QuestActive 7214
	BaseLevel 69..79
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot saveMap comodo
	call {
		call SetSaveIn "comodo"
	}
}

automacro Eden60IrNoMapa {
	QuestActive 7214
	BaseLevel 69..79
	exclusive 1
	ConfigKeyNot In_saveMap_sequence true
	ConfigKey saveMap comodo
	call {
		#eden 60
		do conf -f quest_eden em_curso
		log Indo Começar quest Eden 60
		do move comodo &rand(174,176) &rand(344,346)
		#do talknpc 173 354 c c c c c #Mémbro do grupo Éden#2n
		do talk &npc( 173 354 ) #Mémbro do grupo Éden#2n
	}
}

automacro Eden12Caçar {
	QuestHuntOngoing 7129 1009, 7130 1107, 7131 1001
	exclusive 1
	timeout 120
	call {
		call caçarMonstros
		if ( &config(lockMap) != moc_fild11) do conf lockMap moc_fild11		
	}
}

automacro Eden26Caçar {
	QuestHuntOngoing 7139 1076, 7140 1031
	exclusive 1
	timeout 180
	call {
		call caçarMonstros
		if ( &config(lockMap) != pay_dun00) do conf lockMap pay_dun00
	}
}

automacro Eden40Caçar {
	QuestHuntOngoing 7148 1686, 7149 1023, 7150 1273
	exclusive 1
  	timeout 180
	call {
		call caçarMonstros
		if ( &config(lockMap) != gef_fild10) do conf lockMap gef_fild10
	}
}

automacro Eden60Caçar {
	QuestHuntOngoing 7215 1278, 7216 1278
	exclusive 1
	timeout 60
	call {
		call caçarMonstros
		if ( &config(lockMap) != beach_dun2) do conf lockMap beach_dun2
	}
}

macro caçarMonstros {
	[
	call voltarAtacar
	do mconf $.QuestHuntOngoingLastMobID 2 0 0
	]
}

automacro Eden60JuntarFolhasEOmbreiras {
	QuestActive 7217
	exclusive 1
	timeout 120
	call {
		do iconf 7196 5 1 0 #ombreira
		do iconf 7100 7 1 0 #folha
		$qtdDeOmbeira = GetNamenyNameID(7196)
		$qtdDeFolha = GetNamenyNameID(7100)
		$ombreira = &invamount ( $qtdDeOmbeira )
		$folha = &invamount ($qtdDeFolha)
		if ( $ombreira < 5 )                 goto Ombreira
		if ( $ombreira >= 5 && $folha < 7 )  goto Folha
		if ( $ombreira >= 5 && $folha >= 7 ) goto Juntei
		
		:Ombreira
		log Pegar Ombreiras
		do conf lockMap um_fild02
		call voltarAtacar
		stop
		
		:Folha
		log Pegar Folhas
		do conf lockMap um_fild01
		call voltarAtacar
		stop
		
		:Juntei
		log Vamos No NPC já temos os Itens.
		call pararDeAtacar
		do move um_fild01 &rand(36,38) &rand(277,279)
		do talknpc 34 280 c  #Romeo#2nd02
		stop
	}
}

automacro Eden12FinalizarCaças {
	QuestHuntCompleted 7129 1009, 7130 1107, 7131 1001
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		do move moc_fild11 &rand(181,183) &rand(254,256)
	  	do talk 0 #cao falante 
		release Eden12Caçar
	}
}

automacro Eden26FinalizarCaças {
	QuestHuntCompleted 7139 1076, 7140 1031
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		do move pay_arche &rand(44,46) &rand(132,134)
		#do talknpc 41 136 c c c c c #Coral
		do talk &npc( 41 136 ) #Coral 
		release Eden26Caçar
	}
}

automacro Eden40FinalizarCaças {
	QuestHuntCompleted 7148 1686, 7149 1023, 7150 1273
	exclusive 1
	call {
		call pararDeAtacar
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		do move in_orcs01 &rand(34,36) &rand(162,164)
		#do talknpc 38 175 c c #Absalom#para07
		do talk 0 #Absalom
		release Eden40Caçar
	}
}

automacro Eden60FinalizarCaças {
	QuestHuntCompleted 7215 1278, 7216 1278
	exclusive 1
	call {
		do mconf $.QuestHuntCompletedLastMobID 0 0 0
		switch ($.QuestHuntCompletedLastQuestID) {
			
			case (= 7215) { #golem1
				do move comodo &rand(174,176) &rand(344,346)
				#do talknpc 173 354 c c c c c #Mémbro do grupo Éden#2n
				do talk &npc( 173 354 )
				release Eden60Caçar
			}
			
			case (= 7216) { #golem2
				do move um_fild01 &rand(36,38) &rand(277,279)
				#do talknpc 34 280 c c c c #Romeo#2nd02
				do talk &npc( 34 280 )
				release Eden60Caçar
			}
		}
	}
}

automacro voltarDoMapa {
	QuestActive 7132, 7141, 7151, 7218
	NpcNotNear /Boya|Ur/
	exclusive 1
	call {
		log Completei as Caças!
		log vamo lá pegar meus equips de direito!
		call moverPertoDosNpcEden
	}
}

automacro voltarDoMapaDentroDoEden {
	QuestActive 7132, 7141, 7151, 7218
	NpcNear /Boya|Ur/
	exclusive 1
	call {
		#7132 : eden 12
		#7141 : eden 26
		#7151 : eden 40
		#7218 : eden 60
		switch ($.QuestActiveLastID) {
			
			case (= 7132) { #eden 12
				#do talknpc 25 35 c c c #Boya
				do talk &npc(/Boya/)
				do mconf Filhote de Lobo 1 0 0
				do mconf Escorpião 1 0 0
				do mconf Condor 1 0 0
				release EdenPegandoEquips12e26e40
			}
			
			case (= 7141) { #eden 26
				#do talknpc 25 35 c c #Boya
				do talk &npc(/Boya/)
				do mconf Esqueleto 1 0 0
				do mconf Poporing 1 0 0
				do mconf Zumbi 1 0 0
				release EdenPegandoEquips12e26e40
			}
			
			case (= 7151) { #eden 40
				#do talknpc 25 35 c c #Boya
				do talk &npc(/Boya/)
				do mconf Guerreiro Orc 1 0 0
				do mconf Filhote de Orc 1 0 0
				do mconf Senhora Orc 1 0 0
				release EdenPegandoEquips12e26e40
			}
			
			case (= 7218) { #eden 60
				#do talknpc 23 35 c c c #Uru
				do talk &npc(/Ur/)
			}
		}
		do conf -f quest_eden terminando
	}
}
automacro EdenPegandoEquips12e26e40e60IndoProNpc {
	NpcNotNear /hael/i
	ConfigKey quest_eden terminando
	BaseLevel 12..99
	exclusive 1
	call {
		do move moc_para01 &rand(112,114) &rand(31,33)
	}
}

automacro EdenPegandoEquips12e26e40 {
	ConfigKey quest_eden terminando
	BaseLevel 12..59
	exclusive 1
	NpcNear /hael/i
	call {
		do talk $.NpcNearLastBinId
		do talk resp 0
		do talk resp 1
		
		if ( $.lvl >= 40 ) {
			#do talknpc 112 96 c r2 c c r4 c r0 c #Administrador Mihael(encanto de destreza do chapéu valhalla)
			do talk $.NpcNearLastBinId
			do talk resp 2
			do talk resp 4
			do talk resp 0
		}
		do conf quest_eden none
	}
}

automacro Eden12Equipando {
	IsNotEquippedID armor 15009
	InInventoryID 15009 = 1
	BaseLevel 12..25 
	exclusive 1
	run-once 1 
	call {
		$check = GetIndexAndEquipped("robe", 2560) #Capa Valhalla
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead", 5583) #Chapeu valhalla
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes", 2456) #Botas Valhalla Iniciante
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15009) #Uniforme Valhalla Iniciante
		if ($check != -1) do eq $check
	}
}

automacro Eden26Equipando {
	IsNotEquippedID armor 15010
	InInventoryID 15010 = 1
	BaseLevel 26..39
	exclusive 1
	run-once 1
	call {
		$check = GetIndexAndEquipped("shoes", 2457) #Botas Valhalla Intermediárias
		if ($check != -1) do eq $check 
		$check = GetIndexAndEquipped("rightHand", 13050) #Adaga Valhalla Iniciante
		if ($check != -1) do eq $check 
		$check = GetIndexAndEquipped("armor", 15010) #Uniforme Valhalla Intermediário
		if ($check != -1) do eq $check 
	}
}

automacro Eden40Equipando {
	IsNotEquippedID armor 15011
	InInventoryID 15011 = 1
	BaseLevel 40..59
	exclusive 1
	run-once 1
	call {
		$check = GetIndexAndEquipped("shoes", 2458) #Botas Valhalla Avançadas
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand", 13051) #Adaga Valhalla Intermediária
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15011) #Uniforme Valhalla Avançado
		if ($check != -1) do eq $check
	}
}

automacro EdenPegandoEquips60 {
	ConfigKey quest_eden terminando
	BaseLevel 60..98
	exclusive 1
	IsNotEquippedID armor 15031
	NpcNear /Ferreiro|smith/i
	call {
		#do talknpc 111 83 c r2 c c r1 #Ferreiro Torhen#2nd10
		do talk $.NpcNearLastBinId
		do talk resp 2
		do talk resp 1
		do conf quest_eden none
	}
}

automacro Eden60Equipando {
	IsNotEquippedID armor 15031
	InInventoryID 15031 = 1
	BaseLevel 60..98
	exclusive 1		
	call {
		$check = GetIndexAndEquipped("robe", 2571) #Capa II do Grupo Eden
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead", 18514) #Chapéu_II_do_Grupo_Éden#
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("shoes", 2473) ##Botas_IV_do_Grupo_Éden#
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor", 15031) #Armadura_do_Grupo_Éden#
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand",13066) #Adaga_III_do_Grupo_Éden#
		if ($check != -1) do eq $check
	}
}

#From- Macro Quest Arruaceiro 2.0

#By Gaspel
#Edited- by CALF
#convertido pra eventMacro por Nipodemos

automacro virarArruaceiro1 {
	JobID 6 #gatuno
	JobLevel = 50
	priority 2
	exclusive 1
	QuestInactive 2017
	QuestInactive 2018
	QuestInactive 2022
	QuestInactive 2023
	QuestInactive 2024
	QuestInactive 2026
	call {
		call pararDeAtacar
		do conf lockMap none
		do conf -f virarArruaceiro true
		do move in_rogue 370 119
		#do talknpc 363 122 c r0 r0 r0 r2 r3 r1 r3 r2 r1 r0 r1 c c c #Arruaceira da Guilda
		do talk &npc (363 122)
		do talk resp 0
		do talk resp 0
		do talk resp 0
		do talk resp 2
		do talk resp 3
		do talk resp 1
		do talk resp 3
		do talk resp 2
		do talk resp 1
		do talk resp 0
		do talk resp 1
	}
}

automacro virarArruaceiro2 {
	JobID 6 #gatuno 6 #gatuno
	QuestActive 2017
	exclusive 1
	run-once 1
	call {
		lock virarArruaceiroAgain				   
		do move in_rogue 372 23
		do talknpc 376 23 c  #Smith
	}
}

automacro virarArruaceiro3 {
	JobID 6 #gatuno 6 #gatuno
	QuestActive 2018
	exclusive 1
	timeout 100
	call  {
		[
		do iconf Erva Azul 7 1 0
		do iconf Unha Apodrecida 10 1 0
		do iconf Osso 10 1 0
		do iconf Mandíbula Horrenda 10 1 0
		]
		$ervaAzul       = &invamount (Erva Azul)
		$unhaApodrecida = &invamount (Unha Apodrecida)
		$osso           = &invamount (Osso)
		$mandibula      = &invamount (Mandíbula Horrenda)
		if ($ervaAzul < 6 ) goto Erva
		if ($ervaAzul >= 6 && $unhaApodrecida < 10 ) goto Unha
		if ($ervaAzul >= 6 && $unhaApodrecida >= 10 && $osso < 10) goto Osso
		if ($ervaAzul >= 6 && $unhaApodrecida >= 10 && $osso >= 10 && $mandibula < 10 ) goto Mandibula
		if ($ervaAzul >= 6 && $unhaApodrecida >= 10 && $osso >= 10 && $mandibula >= 10 ) goto Npc
		
		
		:Erva
		log Pegar Erva
		[
		do conf lockMap cmd_fild02
		call voltarAtacar
		]
		stop
		
		
		:Unha
		log Pegar Unha
		[
		do conf lockMap pay_dun00
		call voltarAtacar
		]
		stop
		
		
		:Osso 
		log Pegar Osso
		[
		do conf lockMap pay_dun01
		do conf route_randomWalk 1
		]
		stop
		
		
		:Mandibula
		log Pegar mandibula
		[	
		do conf lockMap pay_dun00
		do conf route_randomWalk 1
		]
		stop
		
		
		:Npc
		log Vamos No NPC já temos os Itens...
		call pararDeAtacar
		do move in_rogue 372 23
		do talknpc 376 23 c #Smith
		do talknpc 376 23 c #Smith
		do talknpc 376 23 c #Smith
		stop
	}
}

automacro virarArruaceiro4.0 {
	JobID 6 #gatuno 6 #gatuno
	QuestActive 2022
	exclusive 1
	JobLevel = 50
	run-once 1
	call {	
		do conf -f questArruaceiro 0
		do move cmd_fild09 107 195
		do talk resp 1		
		do talk resp 2
		do talk resp 1
		do talk resp 0
	}
}

automacro virarArruaceiro4.1 {
	JobID 6 #gatuno 6 #gatuno
	QuestActive 2023 
	exclusive 1
	JobLevel = 50
	run-once 1
	call {
		do conf -f questArruaceiro 1
		do move cmd_fild04 304 180
		pause 1
		do talk resp 2
		do talk resp 1
		do talk resp 1
		do talk resp 2
	}
}

automacro virarArruaceiro4.2 {
	QuestActive 2024
	exclusive 1
	JobLevel = 50
	run-once 1
	call {
		do conf -f questArruaceiro 2
		do move cmd_fild09 335 143
		do talk resp 0
		do talk resp 2
		do talk resp 4
		do talk resp 0
	}
}

automacro virarArruaceiro5.0 {
	QuestActive 2026
	ConfigKey questArruaceiro 0
	JobLevel = 50
	NotInMap in_rogue
	run-once 1
	call {
		do conf attackAuto -1
		do move cmd_fild09 107 195
		do talk resp 1
		do talk resp 2
		do talk resp 1
		do talk resp 0
	}
}

automacro virarArruaceiro5.1 {
	ConfigKey questArruaceiro 1
	QuestActive 2026
	JobLevel = 50
	exclusive 1
	run-once 1
	call {
		do conf attackAuto -1
		do move cmd_fild04 304 180
		do talk resp 2
		do talk resp 1
		do talk resp 1
		do talk resp 2
	}
}

automacro virarArruaceiro5.2 {
	ConfigKey questArruaceiro 2
	QuestActive 2026
	JobLevel = 50
	NotInMap in_rogue
	run-once 1
	call {
		do conf attackAuto -1
		do move cmd_fild09 335 143
		do talk resp 0
		do talk resp 2
		do talk resp 4
		do talk resp 0
	}
}

automacro virarArruaceiro6.0 {
	JobLevel = 50
	IsInMapAndCoordinate in_rogue 169 34
	run-once 1
	call {
		do talknpc 160 34 c r0 c
	}
}

automacro virarArruaceiro6.1 {
	JobLevel =50
	IsInMapAndCoordinate in_rogue 246 25
	run-once 1
	call {
		do move in_rogue 244 33
		do talknpc 244 39 c r0 c
	}
}


automacro virarArruaceiro6.2 {
	JobLevel == 50
	IsInMapAndCoordinate in_rogue 164 106
	run-once 1
	exclusive 1
	call {
		do move in_rogue 172 108
		do talknpc 177 109 c r0 c
	}
}

automacro virarArruaceiro7 {
	JobLevel = 50
	exclusive 1
	IsInMapAndCoordinate in_rogue 15 105
	run-once 1
	call {
		do conf attackAuto -1 
		do conf itemsTakeAuto 0
		do move in_rogue 359 117
	}
}

automacro virarArruaceiro8 {
	JobLevel = 50
	IsInMapAndCoordinate in_rogue 359 117 
	run-once 1
	exclusive 1
	call {
		do move in_rogue 369 119
		do talknpc 363 122 c c c
		do conf itemsTakeAuto 1
	}
}

automacro jaSouArruaceiro {
	JobID 17
	InMap in_rogue
	exclusive 1
	run-once 1
	call {
		do conf virarArruaceiro none
		do conf questArruaceiro none
		$check = GetIndexAndEquipped("shoes",2458) #Botas Valhalla Avançadas
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("rightHand",13051) #Adaga Valhalla Intermediária
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("armor",15011) #Uniforme Valhalla Avançado
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("robe",2560 )#Capa Valhalla#
		if ($check != -1) do eq $check
		$check = GetIndexAndEquipped("topHead",5583) #Chapéu Valhalla#
		if ($check != -1) do eq $check
		
	}
}

automacro parandoDePegarPotDeAprendiz {
	InInventoryID 569 < 1
	InStorageID 569 < 1
	ConfigKey getAuto_0 Poção de Aprendiz
	exclusive 1
	call {
		log as poções de aprendiz acabaram, removendo o getAuto
		do conf getAuto_0 none
	}
}

automacro todobugadão {
	InMapRegex /^(?!new_\d-\d|moc_prydb1)$/
	JobID 0
	exclusive 1
	JobLevel = 10
	timeout 100
	call {
		log WTF?
		log Deveria ser gatuno agora, mas nem isso eu sou
		log tô todo bugado
		log vamo virar gatuno, tá na hora
		do move moc_prydb1 &rand(44,46) &rand(127,129)
	}
}

automacro upAteLv12Aprendiz {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap pay_fild01
	ConfigKeyNot In_saveMap_sequence true
	JobLevel != 10
	JobID 0
	exclusive 1
	timeout 30
	InMapRegex /^(?!new_\d-\d|moc_prydb1)$/
	call {
		log pelo visto, ainda to no lvl de Classe $JobLevelLast ainda... 
		log o que aconteceu?
		log a que ponto chegamos?
		log nuss
		log Tentando resolver isso...
		call configurarMapa "payon" "pay_fild01"
	}
}

automacro upAteLv12 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap pay_fild01
	ConfigKeyNot In_saveMap_sequence true
	BaseLevel 1..11
	NotInMap new_1-3, new_2-3, new_3-3, new_4-3, new_5-3
	exclusive 1
	JobID 6 #gatuno
	priority 5
	timeout 30
	call {
		call configurarMapa "payon" "pay_fild01"
	}
}
automacro upAteLv26 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap pay_fild08
	ConfigKeyNot In_saveMap_sequence true
	BaseLevel 12..25
	exclusive 1
	JobID 6 #gatuno
	priority 5
	timeout 30
	call {
		call configurarMapa "payon" "pay_fild08"
	}
}

automacro upAteLv35 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap pay_dun00
	ConfigKeyNot In_saveMap_sequence true
	BaseLevel 26..35
	exclusive 1
	JobID 6 #gatuno
	priority 5
	timeout 30
	call {
		do iconf Erva Azul 7 1 0
		do iconf Unha Apodrecida 10 1 0
		do iconf Osso 10 1 0
		do iconf Mandíbula Horrenda 10 1 0
		call configurarMapa "payon" "pay_dun00"
	}
}

automacro upAteLv44 {
	BaseLevel 36..43
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap pay_fild09
	ConfigKeyNot In_saveMap_sequence true
	exclusive 1
	JobID 6 #gatuno
	priority 5
	timeout 30
	call {
		do iconf Erva Azul 7 1 0
		do iconf Unha Apodrecida 10 1 0
		do iconf Osso 10 1 0
		do iconf Mandíbula Horrenda 10 1 0
		call configurarMapa "payon" "pay_fild09"
	}
}

automacro upAteLv54 {
	BaseLevel 44..53
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap cmd_fild02
	ConfigKeyNot In_saveMap_sequence true
	exclusive 1
	JobID 6 #gatuno
	priority 5
	timeout 30
	call {
		call configurarMapa "comodo" "cmd_fild02"
	}
}

automacro upAteLv60 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap iz_dun02
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot virarArruaceiro true
	JobID 6, 17
	BaseLevel 54..59
	exclusive 1
	priority 5
	timeout 30
	call {
		call configurarMapa "izlude" "iz_dun02"
	}
}

automacro upAteLv70 {
	BaseLevel 60..70
	JobID 17
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap moc_fild17
	ConfigKeyNot In_saveMap_sequence true
	priority 5
	timeout 30
	call {
		call configurarMapa "morocc" "moc_fild17"
	}
}

automacro upAteLv80 {
	BaseLevel 71..79
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap mjolnir_11
	ConfigKeyNot In_saveMap_sequence true
	JobID 17
	exclusive 1
	priority 5
	timeout 30
	call {
		call configurarMapa "prontera" "mjolnir_11"
	}
}

automacro upAteLv92 {
	BaseLevel 80..91
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap gef_fild06
	ConfigKeyNot In_saveMap_sequence true
	JobID 17
	exclusive 1
	priority 5
	timeout 30
	call {
		call configurarMapa "geffen" "gef_fild06"
	}
}
automacro IndoPraRachelPraUpAteLv99 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot lockMap ra_fild12
	ConfigKeyNot aeroplano1 rachel
	BaseLevel 92..99
	NotInMap rachel
	NotInMap ra_fild12
	JobID 17
	exclusive 1
	priority 5
	timeout 30
	call {
		call junopra "rachel"
	}
}

automacro salvandoEmRachelPraUpAteLv99 {
	ConfigKeyNot saveMap rachel
	InMap rachel
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot aeroplano1 rachel
	ConfigKeyNot In_saveMap_sequence true
	BaseLevel 92..99
	JobID 17
	exclusive 1
	run-once 1
	call {
		call SetSaveIn "rachel"
	}
}

automacro upAteLv99 {
	ConfigKeyNot quest_eden em_curso
	ConfigKeyNot quest_eden terminando
	ConfigKeyNot In_saveMap_sequence true
	ConfigKeyNot lockMap ra_fild12
	BaseLevel 92..99
	exclusive 1
	ConfigKey saveMap rachel
	call {
		call voltarAtacar
		do conf lockMap ra_fild12
	}
}

automacro estouLv99 {
	BaseLevel = 99
	exclusive 1
	timeout 15
	JobID 17 #arruaceiro
	call {
		log CHEGUEI NO LVL 99 FINALMENTE !!!!!!!
		log CARA ISSO LEVOU TEMPO PARA CAR**HO
	}
}

macro configurarMapa {
	if ( &config(saveMap) = $.param1 ) {
		do conf lockMap $.param2
		call voltarAtacar
	} else {
		call SetSaveIn $.param1
	}
}

macro pararDeAtacar {
	[
	do conf route_randomWalk 0
	do conf attackAuto 1
	]
}

macro voltarAtacar {
	[
	do conf route_randomWalk 1
	do conf attackAuto 2
	]
}

automacro ConfigEstáErrada {
	exclusive 1
	overrideAI 1
	priority -5
	ConfigKeyNot autoTalkCont 1
	call {
		log Tem uma config que está errada
		log A config é $.ConfigKeyNotLastKey
		log O valor que quero é $.ConfigKeyNotLastWantedValue
		log Mas o valor atual é $.ConfigKeyNotLastKeyValue
		log Mudando valor da config $.ConfigKeyNotLastKey de $.ConfigKeyNotLastKeyValue para $.ConfigKeyNotLastWantedValue
		do conf $.ConfigKeyNotLastKey $.ConfigKeyNotLastWantedValue
	}
}

#Digite no console do eventMacro junopra --cidade
#Pode ser tambem einbrochpra
#ou rachelpra
#se o nome estiver certo, ele vai mover pra cidade desejada
macro junopra {
	log Vamos ir de Juno para $.param1
	#Se a cidade for izlude ou rachel , ele pega o aeroplano respectivo
	if ( $.param1 =~ /izlude/i ) {
		do conf -f aeroplano1 izlude
		do conf -f aeroplano2 none
	} elsif ( $.param1 =~ /rachel/i ) {
		do conf -f aeroplano1 rachel
		do conf -f aeroplano2 none
	} elsif ( $.param1 =~ /hugel/i ) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 hugel
	} elsif ( $.param1 =~ /lighthalzen/i ) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 lighthalzen
	} elsif ( $.param1 =~ /einbroch/i ) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 eibroch
	} elsif ( $.param1 =~ /[jy]uno/) {
		log VOCÊ QUER IR DE JUNO PRA JUNO?
	log PORQUE VOCÊ FARIA ISSO?
	} else {
		[
		log Você digitou um nome inválido, por favor tente novamente
		log Os valores podem ser:
		log izlude , rachel , juno ou yuno 
		log hugel , lighthalzen ou einbroch
		log Escreva como quiser, desde que escreva certo
		]
		stop
	}
	$aeroplano1 = &config(aeroplano1)
	$aeroplano2 = &config(aeroplano2)
	if ($.map = airplane || $.map = airplane_01) {
	log ja estamos no aeroplano, só esperar agora
	} else {
		if ( $.map != yuno ) do move yuno
	}
	log $aeroplano1, $aeroplano2
}

macro einbrochpra {
	log Vamos ir de Eibroch para $.param1
	#se a cidade for juno hugel ou lighthalzen ele só pega 1 aeroplano
	# se for outra cidade, ele pega os dois aeroplanos
	if ( $.param1 =~ /izlude/i ) {
		do conf -f aeroplano1 izlude
		do conf -f aeroplano2 juno
	} elsif ($.param1 =~ /rachel/i ) {
		do conf -f aeroplano1 rachel
		do conf -f aeroplano2 juno
	} elsif ( $.param1 =~ /hugel/i ) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 hugel
	} elsif ( $.param1 =~ /lighthalzen/i ) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 lighthalzen
	} elsif ($.param1 =~ /einbroch/i ) {
		log VOCÊ QUER IR DE EIBROCH PRA EINBROCH?
	log PORQUE VOCÊ FARIA ISSO?
	} elsif ( $.param1 =~ /[jy]uno/) {
		do conf -f aeroplano1 none
		do conf -f aeroplano2 juno
	} else {
		[
		log Você digitou um nome inválido, por favor tente novamente
		log Os valores podem ser izlude , rachel , juno ou yuno , 
		log hugel , lighthalzen ou einbroch
		log pode ser com letra maiuscula ou sem
		]
		stop
	}
	$aeroplano1 = &config(aeroplano1)
	$aeroplano2 = &config(aeroplano2)
	if ($.map = airplane || $.map = airplane_01) {
	log ja estamos no aeroplano, só esperar agora
	} else {
		do move airplane
	}
	log $aeroplano1, $aeroplano2
}

macro rachelpra {
	log Vamos ir de Rachel para $.param1
	#se a cidade for izlude ou juno ele só pega 1 aeroplano
	# se for outra cidade, ele pega os dois aeroplanos
	if ( $.param1 =~ /izlude/i ) {
		do conf -f aeroplano1 izlude
		do conf -f aeroplano2 none
	} elsif ($.param1 =~ /rachel/i ) {
		log VOCÊ QUER IR DE RACHEL PRA RACHEL?
	log PORQUE VOCÊ FARIA ISSO?
	} elsif ( $.param1 =~ /hugel/i ) {
		do conf -f aeroplano1 juno
		do conf -f aeroplano2 hugel
	} elsif ( $.param1 =~ /lighthalzen/i ) {
		do conf -f aeroplano1 juno
		do conf -f aeroplano2 lighthalzen
	} elsif ($.param1 =~ /einbroch/i ) {
		do conf -f aeroplano1 juno
		do conf -f aeroplano2 eibroch
	} elsif ( $.param1 =~ /[jy]uno/) {
		do conf -f aeroplano1 juno
		do conf -f aeroplano2 none
	} else {
		[
		log Você digitou um nome inválido, por favor tente novamente
		log Os valores podem ser izlude , rachel , juno ou yuno , 
		log hugel , lighthalzen ou einbroch
		log pode ser com letra maiuscula ou sem
		]
		stop
	}
	$aeroplano1 = &config(aeroplano1)
	$aeroplano2 = &config(aeroplano2)
	if ( $.map = airplane || $.map = airplane_01) {
	log ja estamos no aeroplano, só esperar agora
	} else {
		do move ra_fild12 294 208
		do talk resp 0
		log $aeroplano1, $aeroplano2
	}
}

automacro dentroDoAeroplanoInternacional {
	InMap airplane_01
	LocalMsg /Bem-vindos a $aeroplano1|Welcome to $aeroplano1/i
	exclusive 1
	call sairDoAeroplano
}

automacro dentroDoAeroplanoDomestico {
	InMap airplane
	LocalMsg /Bem-vindos a $aeroplano2|Welcome to $aeroplano2/i
	exclusive 1
	call sairDoAeroplano
}

macro sairDoAeroplano {
	do move 243 74
}

#Se estivermos na cidade, e o local desejado for essa cidade, ele completa o objetivo
#se estivermos na cidade, mas nao for o objetivo, nada acontece, já que provavelmente
#ele só está se locomovendo pra fazer qualquer outra coisa aleatoria que nao tem nada
# a ver com esse macro
automacro chegueiEmEinbroch {
	InMap einbroch
	ConfigKey aeroplano2 einbroch
	run-once 1
	exclusive 1
	call objetivoCompleto
}

automacro chegueiEmHugel { 
	InMap hugel
	ConfigKey aeroplano2 hugel 
	run-once 1
	exclusive 1
	call objetivoCompleto
}

automacro chegueiEmIzlude {
	InMap izlude
	ConfigKey aeroplano1 izlude
	run-once 1
	exclusive 1
	call objetivoCompleto
}

automacro chegueiEmLighthalzen {
	InMap lighthalzen
	ConfigKey aeroplano2 lighthalzen
	run-once 1
	exclusive 1
	call objetivoCompleto
}

automacro chegueiEmRachel {
	InMap ra_fild12
	ConfigKey aeroplano1 rachel
	run-once 1
	exclusive 1
	call {
		do move rachel
		call objetivoCompleto
	}
}

macro objetivoCompleto {
	#Se estivermos na cidade, e o local desejado for essa cidade, ele completa o objetivo 
	log cheguei em $.InMapLast , objetivo completo
	do conf aeroplano2 none
	do conf aeroplano1 none
}

automacro chegueiEmJuno {
	InMap yuno
	ConfigKeyNot aeroplano1 none, aeroplano2 none
	exclusive 1
	call {
		# é aqui que ocorre a mágica, quando chega em juno
		# ele detecta se precisa pegar outro aeroplano ou não
		# se ele precisar ele vai
		# se não precisar ele vai pra proximo da kafra e completa o objetivo
		log destino para aeroplano1 é: &config(aeroplano1)
		log destino para aeroplano2 é: &config(aeroplano2)
		if (&config(aeroplano1) =~ /rachel|izlude/i  ) {
		do move airplane_01
		} elsif ( &config(aeroplano2) =~ /hugel|einbroch|lighthalzen/i ) {
		do move airplane
		} elsif ( &config(aeroplano1) =~  /[yj]uno/i || &config(aeroplano2) =~ /[yj]uno/i ) {
			do move &rand(150, 154) &rand(182, 186)
		call objetivoCompleto
		} else {
			log Falha em descobrir a rota correta, revise o código
		}
	}
}

macro SetSaveIn {
	do conf -f saveMap_save_sequence c r0
	do conf -f saveMap_storage_sequence c r1
	switch ( $.param1 ) {
		case (=~ /einbroch/i ) {
			do conf -f saveMap_wanted einbroch
			do conf -f saveMap_kafra_position 242 205
			do conf -f saveMap_sellNpc_position einbroch 224 207
		}
		case (=~ /aldebaran/i ) {
			do conf -f saveMap_wanted aldebaran
			do conf -f saveMap_kafra_position 143 119
			do conf -f saveMap_sellNpc_position aldebaran 165 107
		}
		case (=~ /juno/i ) {
		    do conf -f saveMap_wanted yuno
			do conf -f saveMap_kafra_position 152 187
			do conf -f saveMap_sellNpc_position yuno_in01 25 34
		}
		case (=~ /rachel/i ) {
			do conf -f saveMap_wanted rachel
			do conf -f saveMap_kafra_position 109 138
			do conf -f saveMap_sellNpc_position rachel 65 80
		}
		case (=~ /comodo/i ) {
		    do conf -f saveMap_wanted comodo
			do conf -f saveMap_kafra_position 195 150
			do conf -f saveMap_sellNpc_position cmd_in01 79 182
		}
		case (=~ /prontera/i ) {
		    do conf -f saveMap_wanted prontera
			do conf -f saveMap_kafra_position 151 29
			do conf -f saveMap_sellNpc_position prontera 113 42
		}
		case (=~ /payon/i ) {
			do conf -f saveMap_wanted payon
			do conf -f saveMap_kafra_position 181 104
			do conf -f saveMap_sellNpc_position payon_in01 5 49
		}
		case (=~ /geffen/i ) {
			do conf -f saveMap_wanted geffen
			do conf -f saveMap_kafra_position 120 62
			do conf -f saveMap_sellNpc_position geffen_in 74 144
		}
		case (=~ /morocc|morroc|morooc/i ) {
			do conf -f saveMap_wanted morocc
			do conf -f saveMap_kafra_position 156 97
			do conf -f saveMap_sellNpc_position morocc_in 141 67
		}
		case (=~ /izlude/i ) {
			do conf -f saveMap_wanted izlude
			do conf -f saveMap_kafra_position 134 88
			do conf -f saveMap_sellNpc_position izlude 105 99
		}
		case ( =~ /veins/i ) {
			do conf -f saveMap_wanted veins
			do conf -f saveMap_kafra_position 207 128
			do conf -f saveMap_sellNpc_position ve_in 243 303
		}
		else {
			log nome da cidade inválido, tente novamente...
			log Talvez o nome foi escrito errado?
			stop
		}
	}
	log Iniciando seguência de salvamento em &config(saveMap_wanted)
	$saveMap = &config(saveMap_wanted)
	do conf -f In_saveMap_sequence true
	
}	


automacro movendoPraKafraForaDaCidade {
	exclusive 1
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap_wanted none
	ConfigKeyNot saveMap $saveMap
	NotInMap $saveMap
	call move_to_near_kafra
}

automacro movendoPraKafraDentroDaCidade {
	exclusive 1
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	NpcNotNear /(Kafra Employee|Funcionária Kafra)/
	InMap $saveMap
	call move_to_near_kafra
}

macro move_to_near_Kafra {
	log estou indo para a kafra em $saveMap &config(saveMap_kafra_position)
	do move $saveMap &config(saveMap_kafra_position) &random("1","2","3","4","5")
}

automacro FalarComKafra {
	ConfigKey In_saveMap_sequence true
	ConfigKeyNot saveMap $saveMap
	ConfigKeyNot saveMap_wanted none
	InMap $saveMap
	NpcNear /(Kafra Employee|Funcionária Kafra)/
	delay 2
	timeout 20
	call {
		log Falando com kafra na posição &config(saveMap_kafra_position) usando a sequência '&config(saveMap_save_sequence)'
		do talknpc &config(saveMap_kafra_position) &config(saveMap_save_sequence)
	}
}

automacro SalvoNaKafra {
	exclusive 1
	priority -5
	NpcMsgName /O seu Ponto de Retorno foi salvo|saved here/ /(Kafra Employee|Funcionária Kafra)/
	ConfigKeyNot saveMap $saveMap
	ConfigKey In_saveMap_sequence true
	InMap $saveMap
	call {
		do conf saveMap $saveMap
		do conf storageAuto_npc $saveMap &config(saveMap_kafra_position)
		do conf storageAuto 1
		do conf sellAuto 1
		do conf sellAuto_npc &config(saveMap_sellNpc_position)
		do conf storageAuto_npc_type 3
		do conf storageAuto_npc_steps &config(saveMap_storage_sequence)
		
		do conf In_saveMap_sequence false
		do conf saveMap_save_sequence none
		do conf saveMap_storage_sequence none
		do conf saveMap_wanted none
		do conf saveMap_kafra_position none
		do conf saveMap_sellNpc_position none
	}
}

sub GetIndexAndEquipped {
	my ($type, $id) = @_;
	my $Item = $char->inventory->getByNameID($id);
	my $EquipIndex = $Item->{binID};
	if (exists $char->{equipment}{$type}) {
		my $equipItem = $char->{equipment}{$type};
		if ($equipItem->{nameID} == $id) {
		return -1;
		} else {
			return $EquipIndex;
		}
		} else {
			return $EquipIndex;
		}
}

sub GetNamenyNameID {
	my $name = $items_lut{$_[0]};
	return $name;
}

sub nextMap {
	my $map = $_[0];
	if ($map =~ /^new_(\d)-(\d)$/) {
	return "new_".$1."-".($2+1);
	} else {
		return 0;
	}
}